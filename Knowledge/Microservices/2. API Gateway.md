# What is an API Gateway in Spring Boot?

An **API Gateway** acts as an middleman sitting between clients and backend services. Instead of clients sending a request directly to the backend services, the request will be sent to API Gateway and API Gateway takes the responsibility of routing the request to appropriate backend service based on the received request and returns the response. 

The API gateway also provides additional functionalities, such as **Authentication**, **Authorization**, **Rate limiting**, **Caching**, and **Monitoring**. By centralizing these functions, the API gateway simplifies the development, management, and scalability of microservices-based applications.

## Why do we need an API Gateway?

Without an API Gateway:
- Client → User Service
- Client → Order Service
- Client → Payment Service

With an API Gateway:
- Client → **API Gateway** → Backend Services    

This makes the system **simpler, more secure, and easier to manage**.
## How it works internally

When a client sends a request — the request first reaches the API Gateway instead of the backend service directly. It then performs **Authentication**. 

**Authentication** in an API Gateway is the process of verifying **who the client is**. When a client sends a request, it usually includes credentials such as an **JWT token**, **OAuth2 access token**, or **Basic credentials** in the request headers. The API Gateway intercepts the request and validates these credentials. If the credentials are invalid or missing, the gateway immediately rejects the request with an HTTP **401 (Unauthorized)** response, and the request never reaches the backend service.

Once the user is authenticated, the request should proceed to authorization. **Authorization** determines **what the authenticated client is allowed to do**. After successful authentication, the API Gateway checks the client’s permissions, roles (such as `ROLE_ADMIN`, `ROLE_USER`). Based on predefined rules, the gateway decides whether the client can access a specific API, HTTP method, or route. If the client does not have sufficient privileges, the gateway blocks the request and returns an HTTP **403 (Forbidden)** response. 


After successful authorization the gateway determines appropriate backend service to which the request should be routed. If multiple instances of the service are running, the gateway applies **load balancing** to select one instance.

Before forwarding the request, API Gateway can translate incoming requests from one protocol to another. For example, it can accept HTTP requests from clients and convert them to gRPC or WebSocket requests for backend services. The request is then sent to the service, which processes only the business logic and returns a response like **`200 OK`** with response details. The API Gateway receives this response, optionally applies response filters such as logging or header modification, and finally sends the response back to the client, making the entire interaction appear as though it came from a single backend system.

---
# API Gateway Responsibilities

## Protocol Translation

API gateways can perform protocol translation between clients and microservices, allowing them to communicate using different protocols. A client might send a request using HTTP/REST, for example, which the gateway translates into a gRPC or message queue-based request before forwarding it to the target microservice.
## Authentication and Authorization

In an **API Gateway**, **authentication and authorization** are handled centrally so that backend microservices do not need to worry about security concerns and can focus only on business logic.

**Authentication** in an API Gateway is the process of verifying **who the client is**. When a client sends a request, it usually includes credentials such as an **JWT token**, **OAuth2 access token**, or **Basic credentials** in the request headers. The API Gateway intercepts the request and validates these credentials. If the credentials are invalid or missing, the gateway immediately rejects the request with an HTTP **401 (Unauthorized)** response, and the request never reaches the backend service.

**Authorization** determines **what the authenticated client is allowed to do**. After successful authentication, the API Gateway checks the client’s permissions, roles (such as `ROLE_ADMIN`, `ROLE_USER`). Based on predefined rules, the gateway decides whether the client can access a specific API, HTTP method, or route. If the client does not have sufficient privileges, the gateway blocks the request and returns an HTTP **403 (Forbidden)** response. 

## Rate Limiting and Quotas

**Rate limiting** is a mechanism that restricts how many requests a client can send to an API within a defined time frame. Its primary goal is to **protect backend services** from overload, abuse while ensuring fair usage across clients.

## Caching

The API gateway can cache responses from microservices to reduce latency and improve performance. By storing frequently accessed data in-memory, the gateway can quickly respond to client requests without needing to repeatedly query the same data from the microservices.